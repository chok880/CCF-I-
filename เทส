-- CK HUB V.2.16
-- üìå ‡∏£‡∏∞‡∏ö‡∏ö AutoFarm + AutoSell + AutoWater + MoveMode ‡πÅ‡∏¢‡∏Å‡∏≠‡∏¥‡∏™‡∏£‡∏∞
-- üìå ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö Config ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á & ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

------------------------------------------------------------
-- üìå ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
------------------------------------------------------------
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

-- ‡πÇ‡∏´‡∏•‡∏î Luna UI
local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua"))()

local Window = Luna:CreateWindow({
    Name = "CK HUB ",
    Subtitle = "V.2.16",
    LoadingEnabled = true,
    LoadingTitle = "CK HUB",
    LoadingSubtitle = "‡πÇ‡∏î‡∏¢ fb ‡∏°‡∏≤‡∏õ‡∏±‡πà‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
    ConfigSettings = {
        ConfigFolder = "CK HUB Config",
        FileName = "MainConfig"
    },
    KeySystem = false
})

local Tab_Main = Window:CreateTab({
    Name = "‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å",
    Icon = "view_in_ar",
    ImageSource = "Material"
})

------------------------------------------------------------
-- üìç ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Config
------------------------------------------------------------
local Config = {
    FarmPos = nil,
    WaterPos = nil,
    SellPos = nil,
    SellMoveMode = "Teleport",
    ReturnMoveMode = "Fly",
    WaterMoveMode = "Teleport"
}

-- ‡πÇ‡∏´‡∏•‡∏î Config
Window:LoadConfig()

if Window:GetConfig("FarmPos") then Config.FarmPos = Window:GetConfig("FarmPos") end
if Window:GetConfig("WaterPos") then Config.WaterPos = Window:GetConfig("WaterPos") end
if Window:GetConfig("SellPos") then Config.SellPos = Window:GetConfig("SellPos") end
if Window:GetConfig("SellMoveMode") then Config.SellMoveMode = Window:GetConfig("SellMoveMode") end
if Window:GetConfig("ReturnMoveMode") then Config.ReturnMoveMode = Window:GetConfig("ReturnMoveMode") end
if Window:GetConfig("WaterMoveMode") then Config.WaterMoveMode = Window:GetConfig("WaterMoveMode") end

------------------------------------------------------------
-- üìç ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
------------------------------------------------------------
local function saveConfig()
    Window:SaveConfig("FarmPos", Config.FarmPos)
    Window:SaveConfig("WaterPos", Config.WaterPos)
    Window:SaveConfig("SellPos", Config.SellPos)
    Window:SaveConfig("SellMoveMode", Config.SellMoveMode)
    Window:SaveConfig("ReturnMoveMode", Config.ReturnMoveMode)
    Window:SaveConfig("WaterMoveMode", Config.WaterMoveMode)
end

Tab_Main:CreateButton({
    Name = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°",
    Callback = function()
        Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        Config.FarmPos = Char.HumanoidRootPart.CFrame
        saveConfig()
        print("üìç ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ü‡∏≤‡∏£‡πå‡∏°:", Config.FarmPos)
    end
})

Tab_Main:CreateButton({
    Name = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ô‡πâ‡∏≥",
    Callback = function()
        Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        Config.WaterPos = Char.HumanoidRootPart.CFrame
        saveConfig()
        print("üíß ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡πâ‡∏≥:", Config.WaterPos)
    end
})

Tab_Main:CreateButton({
    Name = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏Ç‡∏≤‡∏¢",
    Callback = function()
        Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        Config.SellPos = Char.HumanoidRootPart.CFrame
        saveConfig()
        print("üí∞ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≤‡∏¢:", Config.SellPos)
    end
})

------------------------------------------------------------
-- üõ´ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà
------------------------------------------------------------
Tab_Main:CreateDropdown({
    Name = "üõ´ ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡∏ï‡∏≠‡∏ô‡∏Ç‡∏≤‡∏¢)",
    Options = {"Teleport","Fly"},
    CurrentOption = Config.SellMoveMode,
    Callback = function(option)
        Config.SellMoveMode = option
        saveConfig()
        print("‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏ï‡∏≠‡∏ô‡∏Ç‡∏≤‡∏¢:", Config.SellMoveMode)
    end
})

Tab_Main:CreateDropdown({
    Name = "üõ¨ ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡∏Å‡∏•‡∏±‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°)",
    Options = {"Teleport","Fly"},
    CurrentOption = Config.ReturnMoveMode,
    Callback = function(option)
        Config.ReturnMoveMode = option
        saveConfig()
        print("‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°:", Config.ReturnMoveMode)
    end
})

Tab_Main:CreateDropdown({
    Name = "üíß ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡πÑ‡∏õ‡∏ï‡∏±‡∏Å‡∏ô‡πâ‡∏≥)",
    Options = {"Teleport","Fly"},
    CurrentOption = Config.WaterMoveMode,
    Callback = function(option)
        Config.WaterMoveMode = option
        saveConfig()
        print("‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÑ‡∏õ‡∏ï‡∏±‡∏Å‡∏ô‡πâ‡∏≥:", Config.WaterMoveMode)
    end
})

------------------------------------------------------------
-- üõ†Ô∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà
------------------------------------------------------------
local function flyTo(targetCFrame)
    local hrp = Char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local bp = Instance.new("BodyPosition", hrp)
    bp.MaxForce = Vector3.new(400000, 400000, 400000)
    bp.Position = targetCFrame.Position

    local bg = Instance.new("BodyGyro", hrp)
    bg.MaxTorque = Vector3.new(400000, 400000, 400000)
    bg.CFrame = targetCFrame

    task.delay(1, function()
        bp:Destroy()
        bg:Destroy()
    end)
end

local function moveTo(posCFrame, mode)
    if not posCFrame then return end
    if mode == "Teleport" then
        Char.HumanoidRootPart.CFrame = posCFrame
    elseif mode == "Fly" then
        flyTo(posCFrame)
    end
end

------------------------------------------------------------
-- ü§ñ ‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏ü‡∏≤‡∏£‡πå‡∏°
------------------------------------------------------------
local statusLabel = Tab_Main:CreateLabel({
    Text = "‚ö†Ô∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô...",
    Style = 2
})

Tab_Main:CreateToggle({
    Name = "ü§ñ ‡∏≠‡∏≠‡πÇ‡∏ï‡πâ‡∏ü‡∏≤‡∏£‡πå‡∏°",
    CurrentValue = false,
    Callback = function(state)
        _G.AutoFarm = state
        task.spawn(function()
            while _G.AutoFarm and task.wait() do
                Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

                local gui = LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("ToolUI")
                local backpackGui = LocalPlayer.PlayerGui:FindFirstChild("BackpackGui")
                if gui and gui:FindFirstChild("FillingPan") and gui.FillingPan:FindFirstChild("FillText") then
                    local text = gui.FillingPan.FillText.Text
                    local a, b = text:match("([%d%.]+)/([%d%.]+)")
                    local current, max = tonumber(a), tonumber(b)

                    local invText = backpackGui and backpackGui.Backpack.Inventory.TopButtons.Unaffected.InventorySize.Text
                    if invText then
                        local ia, ib = invText:match("(%d+)/(%d+)")
                        local invCur, invMax = tonumber(ia), tonumber(ib)

                        if invCur and invMax and invCur >= invMax and Config.SellPos then
                            -- ‚úÖ ‡πÑ‡∏õ‡∏Ç‡∏≤‡∏¢
                            moveTo(Config.SellPos, Config.SellMoveMode)
                            statusLabel:Set("üí∞ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏¢ ("..invCur.."/"..invMax..")")
                            task.wait(0.7)
                            pcall(function()
                                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                                ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Shop"):WaitForChild("SellAll"):InvokeServer()
                            end)

                            -- ‚úÖ ‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏¢‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Å‡∏•‡∏±‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°
                            if Config.FarmPos then
                                statusLabel:Set("üõ¨ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°...")
                                moveTo(Config.FarmPos, Config.ReturnMoveMode)
                                task.wait(1.2)
                            end
                        elseif current and max and Config.WaterPos and Config.FarmPos then
                            if current >= max then
                                -- ‚úÖ ‡πÑ‡∏õ‡∏ï‡∏±‡∏Å‡∏ô‡πâ‡∏≥
                                moveTo(Config.WaterPos, Config.WaterMoveMode)
                                statusLabel:Set("üíß ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πà‡∏≠‡∏ô‡πÅ‡∏£‡πà (‡πÄ‡∏ï‡πá‡∏°)")
                            else
                                -- ‚úÖ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ü‡∏≤‡∏£‡πå‡∏°
                                moveTo(Config.FarmPos, "Teleport")
                                statusLabel:Set("‚õèÔ∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ü‡∏≤‡∏£‡πå‡∏° ("..current.."/"..max..")")
                            end
                        else
                            statusLabel:Set("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°/‡∏ô‡πâ‡∏≥/‡∏Ç‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô")
                        end
                    end
                end
            end
            if not _G.AutoFarm then
                statusLabel:Set("‚èπÔ∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô")
            end
        end)
    end
})
