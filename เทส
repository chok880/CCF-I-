-- üìå ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local TweenService = game:GetService("TweenService")

-- ‡πÇ‡∏´‡∏•‡∏î Luna UI
local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/refs/heads/master/source.lua"))()

local Window = Luna:CreateWindow({
    Name = "CK HUB ",
    Subtitle = "V.2.14 ‡πÄ‡∏ó‡∏™ ",
    LoadingEnabled = true,
    LoadingTitle = "CK HUB",
    LoadingSubtitle = "‡πÇ‡∏î‡∏¢ fb ‡∏°‡∏≤‡∏õ‡∏±‡πà‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢",
    ConfigSettings = {
        ConfigFolder = "CK HUB Config"
    },
    KeySystem = false
})

Window:CreateHomeTab({
    SupportedExecutors = {"Synapse X", "Krnl", "Fluxus", "Script-Ware"},
    Icon = 1
})

local Tab_Main = Window:CreateTab({
    Name = "‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å",
    Icon = "view_in_ar",
    ImageSource = "Material"
})

------------------------------------------------------------
-- üìç Multi-Farm System + Auto Save Config
------------------------------------------------------------
local Config = Window:GetConfig("FarmConfig") or {}
local farms = Config.Farms or {} -- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Multi-Farm
local waterPos = Config.Water or nil
local statusLabel

local function SaveConfig()
    Config.Farms = farms
    Config.Water = waterPos
    Window:SaveConfig("FarmConfig", Config)
end

-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÉ‡∏´‡∏°‡πà
Tab_Main:CreateButton({
    Name = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÉ‡∏´‡∏°‡πà",
    Callback = function()
        Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local pos = Char.HumanoidRootPart.CFrame
        table.insert(farms, pos)
        SaveConfig()
        print("üìç ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÉ‡∏´‡∏°‡πà:", pos)
    end
})

-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ü‡∏≤‡∏£‡πå‡∏°
local selectedFarm = nil
Tab_Main:CreateDropdown({
    Name = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°",
    Options = {"‡πÑ‡∏°‡πà‡∏°‡∏µ"} ,
    CurrentOption = "‡πÑ‡∏°‡πà‡∏°‡∏µ",
    Callback = function(opt)
        if opt ~= "‡πÑ‡∏°‡πà‡∏°‡∏µ" and farms[tonumber(opt)] then
            selectedFarm = farms[tonumber(opt)]
            print("‚úÖ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà:", opt)
        else
            selectedFarm = nil
        end
    end
})

-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ô‡πâ‡∏≥
Tab_Main:CreateButton({
    Name = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ô‡πâ‡∏≥",
    Callback = function()
        Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        waterPos = Char.HumanoidRootPart.CFrame
        SaveConfig()
        print("üíß ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡πâ‡∏≥:", waterPos)
    end
})

------------------------------------------------------------
-- ü•Ñ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (Pan + Warp)
------------------------------------------------------------
statusLabel = Tab_Main:CreateLabel({
    Text = "‚ö†Ô∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô...",
    Style = 2
})

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏°‡∏π‡∏ó
local function SmartWarp(targetCFrame)
    if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    local hrp = Char.HumanoidRootPart
    local dist = (hrp.Position - targetCFrame.Position).Magnitude
    if dist <= 20 then
        hrp.CFrame = targetCFrame
    else
        local tween = TweenService:Create(hrp, TweenInfo.new(dist/20, Enum.EasingStyle.Linear), {CFrame = targetCFrame})
        tween:Play()
        tween.Completed:Wait()
    end
end

Tab_Main:CreateToggle({
    Name = "ü•Ñ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (Multi-Farm + Smart Warp)",
    CurrentValue = false,
    Callback = function(state)
        _G.AutoPanWarp = state
        task.spawn(function()
            while _G.AutoPanWarp and task.wait(0.1) do
                Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

                -- ‡πÄ‡∏ä‡πá‡∏Ñ GUI ‡∏´‡∏•‡∏≠‡∏î
                local gui = LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("ToolUI")
                if gui and gui:FindFirstChild("FillingPan") and gui.FillingPan:FindFirstChild("FillText") then
                    local text = gui.FillingPan.FillText.Text
                    local current, max = text:match("(%d+)/(%d+)")
                    current, max = tonumber(current), tonumber(max)

                    if current and max and waterPos and selectedFarm then
                        if current >= max then
                            SmartWarp(waterPos)
                            statusLabel:Set("üíß ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πà‡∏≠‡∏ô‡πÅ‡∏£‡πà (‡πÄ‡∏ï‡πá‡∏°)")
                        else
                            SmartWarp(selectedFarm)
                            statusLabel:Set("‚õèÔ∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ü‡∏≤‡∏£‡πå‡∏° ("..current.."/"..max..")")
                        end
                    else
                        statusLabel:Set("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°/‡∏ô‡πâ‡∏≥‡∏Å‡πà‡∏≠‡∏ô")
                    end
                end
            end
            if not _G.AutoPanWarp then
                statusLabel:Set("‚èπÔ∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô")
            end
        end)
    end
})

------------------------------------------------------------
-- ‚è≥ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏∏‡∏î (Anti AFK)
------------------------------------------------------------
Tab_Main:CreateToggle({
    Name = "‚è≥ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏∏‡∏î (Anti AFK)",
    CurrentValue = false,
    Callback = function(state)
        _G.AntiAFK = state
        if state then
            local VirtualInputManager = game:GetService("VirtualInputManager")
            task.spawn(function()
                while _G.AntiAFK and task.wait(60) do
                    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.LeftShift, false, game)
                    task.wait(0.1)
                    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.LeftShift, false, game)
                end
            end)
        end
    end
})
